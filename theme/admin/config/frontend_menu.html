{extend name="layout"/}
{block name="title"}前端菜单{/block}
{block name="keywords"}前端菜单{/block}
{block name="description"}前端菜单{/block}
{block name="link"}
<link rel="stylesheet" type="text/css" href="/static/lib/fuelux/fuelux.min.css">
{/block}
{block name="navi"}前端菜单{/block}
{block name="content-description"}前端菜单描述{/block}
{block name="main-content"}
<div class="row">
    <div class="col-xs-12 col-md-12 col-md-12">
        <div class="row">
            <div class="col-md-12">
                <!-- BASIC -->
                <div class="box">
                    <div class="box-title">
                        <h4><i class="fa fa-table"></i>菜单列表</h4>
                        <div class="tools">
                            <a href="{:url('/admin/config/frontendEdit')}" class="btn btn-xs btn-primary"
                               style="color: #ffffff;">添加菜单
                            </a>
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="tree2" class="tree"></div>
                    </div>
                </div>
                <!-- /BASIC -->
            </div>
        </div>
    </div>
</div>
<!-- /GALLERY -->
{/block}
{block name="javascript"}
<script src="/static/lib/fuelux/fuelux.tree.min.js"></script>
<script>
    jQuery(document).ready(function () {
        App.init(); //Initialise plugins and elements
        $('#tree2').admin_tree({
            dataSource: treeDataSource2 ,
            loadingHTML:'<div class="tree-loading"><i class="fa fa-spinner fa-2x fa-spin"></i></div>',
            'open-icon' : 'fa-minus-square',
            'close-icon' : 'fa-plus-square',
            'selectable' : false,
            'selected-icon' : null,
            'unselected-icon' : null
        });
        //To add font awesome support
        $('.tree').find('[class*="fa-"]').addClass("fa");
    });
    var DataSourceTree = function(options) {
        this._data 	= options.data;
        this._delay = options.delay;
    }

    DataSourceTree.prototype.data = function(options, callback) {
        var self = this;
        var $data = null;

        if(!("name" in options) && !("type" in options)){
            $data = this._data;//the root tree
            callback({ data: $data });
            return;
        }
        else if("type" in options && options.type == "folder") {
            if("additionalParameters" in options && "children" in options.additionalParameters)
                $data = options.additionalParameters.children;
            else $data = {}//no data
        }

        if($data != null)//this setTimeout is only for mimicking some random delay
            setTimeout(function(){callback({ data: $data });} , parseInt(Math.random() * 500) + 200);

        //we have used static data here
        //but you can retrieve your data dynamically from a server using ajax call
        //checkout examples/treeview.html and examples/treeview.js for more info
    };

        var tree_data_2 = {
            '刑侦': {
                'text': '刑侦',
                'type': 'folder',
                'additionalParameters': {
                    'id': '1',
                    'children': {
                        '痕迹检验': {
                            'text': '痕迹检验',
                            'type': 'item',
                            'additionalParameters': {
                                'id': '10'
                            }
                        },
                        '声像技术': {
                            'text': '声像技术',
                            'type': 'item',
                            'additionalParameters': {
                                'id': '9',
                                'item-selected': true
                            }
                        }
                    }
                }
            },
            '交警': {
                'text': '交警',
                'type': 'folder',
                'additionalParameters': {
                    'id': '32',
                    'children': {
                        '交通事故': {
                            'text': '交通事故',
                            'type': 'item',
                            'additionalParameters': {
                                'id': '33'
                            }
                        },
                        '交通道理管理': {
                            'text': '交通道理管理',
                            'type': 'item',
                            'additionalParameters': {
                                'id': '34'
                            }
                        }
                    }
                }
            }
        }
        console.log(JSON.stringify(tree_data_2));
        var treeDataSource2 = new DataSourceTree({data: tree_data_2});

</script>
{/block}